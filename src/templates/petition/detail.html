{% extends 'base.html' %}

{% block body %}
    <div class="container">
        <h1>{{ object.title }}</h1>
        <h3>by {{ object.author.full_name }}</h3>

        <div class="row mt-5">
            <div class="col-8 pe-2">
                {{ object.description }}
            </div>
            <div class="col-4 ps-5">
                <p class="mb-1">
                    We have already collected
                    <span class="fw-bold">{{ object.signatories_count }} signs</span>!<br>
                </p>
                <div class="progress" style="height: 40px;">
                    <div class="progress-bar progress-bar-striped progress-bar-animated bg-primary"
                         role="progressbar"
                         aria-valuenow="{{ object.signatories_count }}" aria-valuemin="0"
                         aria-valuemax="{{ object.signatories_goal }}"
                         style="width: {{ petition.signatories_percentage }}%;"
                    ></div>
                </div>
                <p>
                    The next <span class="fw-bold">goal is {{ object.signatories_goal }}</span>.
                </p>

                <div class="mt-3">
                    {% if not already_signed %}
                        <a class="btn btn-lg btn-primary w-100" type="button" role="button"
                           href="{% url 'petition:vote' object.pk %}"
                        >Vote now!
                        </a>
                    {% else %}
                        <button class="btn btn-lg w-100 btn-outline-dark text-black disabled"
                                type="button"
                        >Already voted
                        </button>
                    {% endif %}
                </div>

                {% if latest_votes %}
                    <div class="mt-3">
                        <h5>Latest signatories</h5>
                        <div class="list-group">
                            {% for vote in latest_votes %}
                                <a class="list-group-item list-group-item-action flex-column align-items-start">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h5 class="mb-1">{{ vote.user.full_name }}</h5>
                                        <span>{{ vote.created_at|timesince }}</span>
                                    </div>
                                </a>
                            {% endfor %}
                        </div>
                    </div>
                {% endif %}

            </div>
        </div>
    </div>


{% endblock %}